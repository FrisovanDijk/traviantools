<script setup>
    import { ref } from 'vue'

    const emit = defineEmits(['add:calculator', 'clear:tab'])

    const menu = [
        {
            name: 'NPCCalculator',
            type: 'village',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-8 h-8"><path fill="#fff" d="M468.72 21.45c-4.12-.06-8.86.69-14.214 2.437-.886.41-73.34 33.862-146.268 70.326-36.687 18.343-73.365 37.396-100.642 53.133-13.64 7.868-24.953 14.94-32.51 20.463-3.78 2.76-6.626 5.173-8.164 6.77-.49.51-.496.696-.62.977.885 18.142 15.927 45.03 31.975 66.427 4.204 5.606 8.403 10.845 12.338 15.56l15.928-15.927 1.084-.607s7.78-4.4 17.12-7.65c4.672-1.626 9.773-3.046 15.142-3.366 5.367-.32 11.818.453 16.74 5.36 4.91 4.9 5.697 11.337 5.39 16.69-.304 5.355-1.705 10.443-3.313 15.102-3.216 9.32-7.58 17.083-7.58 17.083l-.61 1.096-16.06 16.06c4.716 3.934 9.954 8.133 15.56 12.337 21.397 16.048 48.284 31.09 66.426 31.974.28-.123.467-.128.977-.62 1.597-1.537 4.01-4.384 6.77-8.163 5.524-7.557 12.596-18.87 20.464-32.51 15.737-27.277 34.79-63.955 53.133-100.642 36.464-72.928 69.917-145.382 70.326-146.268 4.725-14.486 2.022-24.414-3.586-30.02-3.535-3.537-8.783-5.925-15.808-6.025zM261.864 247.935c-.27-.002-.573.005-.906.025-2.665.16-6.55 1.097-10.294 2.4-6.642 2.31-11.982 5.16-13.266 5.855l-37.838 37.838 18.385 18.385 37.953-37.954c.697-1.295 3.51-6.603 5.79-13.21 1.29-3.73 2.21-7.605 2.36-10.254.102-1.782-.132-2.588-.202-2.856-.223-.06-.787-.223-1.983-.228zm1.983.228c.13.035.177.042.07-.064-.11-.11-.105-.067-.07.064zm-77.012 58.617l-9.9 9.902 18.382 18.382 9.9-9.9-18.382-18.383zm-35.164 10.093L46.467 412.486l53.047 53.047 95.613-105.205-43.455-43.455zM33.132 424.607l-9.665 8.782c-1.213 1.223-1.72 2.35-1.865 4.54-.148 2.21.372 5.432 1.806 9.162 2.87 7.46 9.277 16.667 17.055 24.445 7.778 7.778 16.985 14.185 24.445 17.055 3.73 1.434 6.95 1.954 9.162 1.806 2.19-.146 3.317-.652 4.54-1.865l8.783-9.664-54.262-54.263z"/></svg>',
            calculator: {
                selections: []
            }
        },
        {
            name: 'ProductionOverview',
            type: 'village',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-8 h-8"><path fill="#fff" d="M353.86 48.45c-10.626-.16-20.45 3.456-29.14 13.253l-.193.217-50.586 50.098.628.703c3.395 3.7 3.106 9.463-.642 12.804-3.748 3.342-9.505 2.97-12.793-.825l-5.985-6.712c-.784 1.096-1.627 2.16-2.544 3.178-5.116 5.68-11.746 9.448-18.688 11.023l5.438 20.302c2.54 8.98-8.582 15.417-15.102 8.738l-41.2 40.803c1.41-.082 2.83-.135 4.26-.135 40.63 0 73.616 33.616 73.616 74.672 0 .803-.036 1.598-.06 2.395l141.94-153.74c8.252-10.316 9.687-20.888 6.985-31.832C407.08 82.4 399.6 71.29 389.653 62.967c-3.085-2.583-6.396-4.885-9.835-6.854L258.56 182.725c-3.418 3.685-9.193 3.856-12.824.38-3.63-3.478-3.71-9.255-.175-12.83l115.932-121.05c-1.843-.34-3.68-.584-5.494-.694-.715-.042-1.428-.07-2.137-.08zM232.31 85.597c-4.224-.048-8.876 1.842-12.583 5.96-6.327 7.024-5.918 16.11-.913 20.62 5.006 4.508 14.088 3.968 20.415-3.057 6.325-7.024 5.917-16.112.91-20.62-1.877-1.69-4.328-2.672-6.992-2.867-.277-.02-.556-.032-.837-.035zm-27.95 63.94c-7.19-.12-13.63 2.222-19.577 8.925l-.19.217-99.734 98.77c10.89.53 20.967 4.222 29.386 10.167 1.406-11.834 5.547-22.84 11.785-32.332l.44-.67 6.39-8.21c1.915-2.138 3.963-4.148 6.11-6.05l70.907-70.224c-1.372-.268-2.734-.453-4.07-.534-.486-.03-.968-.05-1.448-.057zm193.3 14.415c-2.226.018-4.423.188-6.588.52L245.744 321.88c-2.968 3.93-6.313 7.544-9.976 10.806l-5.715 6.19c9.9 2.162 19.137 6.16 27.34 11.628-.004-.254-.02-.505-.02-.76 0-12.38 4.545-23.756 12.03-32.496l-.087-.086 1.358-1.344c1.008-1.09 2.06-2.135 3.16-3.13L381.01 206.545c8.52-9.363 20.055-13.314 30.816-12.662 10.908.66 21.093 5.423 29.33 12.316 8.238 6.892 14.684 16.035 17.278 26.538.788 3.194 1.158 6.54 1.078 9.922 4.62-9.422 4.9-19.095 2.242-28.918-3.484-12.87-12.614-25.674-24.47-34.967v.002c-11.194-8.77-24.658-14.314-37.27-14.79-.79-.028-1.573-.04-2.354-.034zm11.926 47.852c-5.712-.106-10.696 1.69-15.463 7.064l-.193.216-82.07 81.28c22.277 2.517 40.072 20.28 43.12 42.585l82.31-89.153c4.454-5.58 5.124-10.833 3.665-16.742-1.468-5.945-5.675-12.3-11.35-17.05-5.678-4.75-12.668-7.778-18.867-8.153-.387-.024-.77-.04-1.152-.047zm-222.274 8.097c-4.898 0-9.644.647-14.167 1.85 1.964-.262 3.962-.41 5.994-.41 24.715 0 45.067 19.99 45.067 44.566 0 24.576-20.355 44.567-45.068 44.567-24.718 0-45.07-19.992-45.07-44.567 0-2.83.282-5.593.797-8.277-2.044 5.915-3.166 12.284-3.166 18.94 0 31.482 24.873 56.668 55.613 56.668s55.61-25.185 55.61-56.668c0-31.482-24.87-56.668-55.61-56.668zm-8.173 19.44c-15.12 0-27.07 11.857-27.07 26.566 0 14.71 11.945 26.567 27.07 26.567 15.117 0 27.067-11.858 27.067-26.567 0-14.71-11.944-26.566-27.068-26.566zm-3.388 7.357c8.742 0 16.023 7.276 16.023 16.02s-7.285 16.02-16.023 16.02c-8.742 0-16.025-7.275-16.025-16.02 0-8.743 7.287-16.02 16.025-16.02zm-93.61 28.68c-21.25 0-38.427 17.364-38.427 39.2 0 21.835 17.177 39.2 38.426 39.2 21.25 0 38.426-17.364 38.426-39.2 0-3.01-.338-5.933-.957-8.74-1.208-2.858-2.23-5.813-3.08-8.838-6.297-12.877-19.314-21.623-34.39-21.623zm-.36 11.016c15.59 0 27.085 14.1 27.085 29.823 0 15.724-11.498 29.82-27.086 29.82-15.59 0-27.087-14.098-27.087-29.82 0-15.727 11.5-29.824 27.088-29.824zm372.58.325c-6.907-.118-13.068 2.118-18.79 8.567l-.193.22-96.345 95.415c27.285 1.628 49.25 23.576 51.547 50.926l96.64-104.672c5.384-6.735 6.24-13.283 4.48-20.42-.234-.944-.527-1.893-.868-2.844l-63.383 66.342c-3.41 3.703-9.196 3.888-12.837.41-3.64-3.48-3.72-9.267-.175-12.844l65.103-68.144c.345-.37.72-.71 1.122-1.018-.786-.76-1.604-1.497-2.447-2.203-6.715-5.62-14.988-9.227-22.463-9.68-.467-.028-.93-.046-1.39-.054zm-372.9 14.73c-7.59 0-13.74 7.046-13.74 15.738 0 8.69 6.15 15.736 13.74 15.736s13.743-7.045 13.743-15.736c0-8.69-6.152-15.737-13.742-15.737zm224.952 16.6c-17.17 0-31.04 14.004-31.04 31.694 0 17.69 13.87 31.695 31.04 31.695s31.04-14.006 31.04-31.696-13.87-31.693-31.04-31.693zm-2.285 11.155c11.398 0 19.28 10.28 19.28 21.092 0 10.814-7.884 21.09-19.28 21.09-11.4 0-19.282-10.277-19.282-21.09 0-10.814 7.883-21.092 19.28-21.092zm-163.378 5.13l-14.027 15.192c-2.17 2.835-4.59 5.46-7.235 7.838l-3.986 4.317c9.624 5.793 17.842 13.746 24.006 23.185 6.715-14.72 17.602-27.106 31.113-35.588-11.134-2.634-21.307-7.826-29.87-14.946zm72.31 20.704c-34.83 0-63.015 28.553-63.015 64.192 0 35.64 28.186 64.194 63.016 64.194s63.017-28.554 63.017-64.194c0-35.638-28.188-64.193-63.017-64.193zM68.68 370.114C42.442 374.65 22.5 397.775 22.5 425.96c0 14.03 4.95 26.802 13.146 36.66-5.09-7.662-8.066-16.868-8.064-26.725v-.004c-.005-26.31 21.188-47.994 47.29-47.994 26.105 0 47.298 21.684 47.292 47.996.005 20.913-13.386 38.89-31.986 45.393 22.622-5.065 40.05-24.075 43.076-47.908-.792-4.6-1.207-9.324-1.207-14.145 0-2.07.077-4.125.226-6.16-4.7-20.763-20.513-37.028-40.71-42.11-3.065.528-6.21.817-9.422.817-4.64 0-9.146-.586-13.462-1.665zm140.48.643c27.187 0 49.2 22.702 49.2 50.203 0 27.503-22.016 50.204-49.2 50.204-27.187 0-49.2-22.702-49.2-50.203 0-27.5 22.017-50.202 49.2-50.202zm0 17.998c-17.21 0-31.2 14.195-31.2 32.205 0 18.012 13.983 32.206 31.2 32.206 17.212 0 31.2-14.195 31.2-32.205 0-18.01-13.982-32.204-31.2-32.204zm81.856 8.148c1.256 4.498 2.16 9.143 2.642 13.912 3.67-4.432 8.01-8.273 12.852-11.38-.032.002-.062.003-.094.003-5.38 0-10.554-.9-15.4-2.536zm-216.14 8.992c-16.2 0-29.295 13.238-29.29 29.995v.005c-.005 16.756 13.09 29.994 29.29 29.994 16.197 0 29.295-13.24 29.29-29.995v-.004c.005-16.756-13.093-29.994-29.29-29.994zm133.706.256c8.967 0 14.96 7.945 14.96 15.953 0 8.01-5.993 15.952-14.96 15.952-8.966 0-14.96-7.943-14.96-15.952 0-8.008 5.994-15.953 14.96-15.953zm127.203 2.664c-20.47 0-37.013 16.723-37.013 37.766 0 21.042 16.544 37.766 37.013 37.766 20.47 0 37.012-16.723 37.012-37.766 0-21.042-16.543-37.766-37.012-37.766zM71.833 422.39c8.965 0 14.958 7.943 14.958 15.952 0 8.01-5.992 15.953-14.958 15.953-8.966 0-14.96-7.944-14.96-15.953 0-8.01 5.994-15.953 14.96-15.953zm267.923 1.423c14.727 0 26.683 12.307 26.683 27.037 0 14.73-11.958 27.037-26.684 27.037-14.728 0-26.682-12.308-26.682-27.037 0-14.73 11.955-27.038 26.682-27.038zm0 18c-4.802 0-8.682 3.845-8.682 9.037s3.877 9.037 8.682 9.037c4.8 0 8.683-3.846 8.683-9.037 0-5.193-3.88-9.038-8.684-9.038z"/></svg>',
            calculator: {
                level: {
                    clay: 10,
                    lumber: 10,
                    iron: 10,
                    crop: 10,
                },
                building: {
                    clay: 5,
                    lumber: 5,
                    iron: 5,
                    crop: 10,
                    egyptian: 0
                },
                oases: [
                    {
                        type1: '',
                        type2: ''
                    },{
                        type1: '',
                        type2: ''
                    },{
                        type1: '',
                        type2: ''
                    }
                ],
                goldBonus: true,
                villagetype: {
                    lumber: 1,
                    clay: 1,
                    iron: 1,
                    crop: 15
                },
            }
        },
        {
            name: 'VillageTimer',
            type: 'village',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-8 h-8"><path fill="#fff" d="M208.242 24.629l-52.058 95.205 95.207 52.059 17.271-31.586-42.424-23.198A143.26 143.26 0 0 1 256 114c78.638 0 142 63.362 142 142s-63.362 142-142 142-142-63.362-142-142c0-16.46 2.785-32.247 7.896-46.928l-32.32-16.16C82.106 212.535 78 233.798 78 256c0 98.093 79.907 178 178 178s178-79.907 178-178S354.093 78 256 78c-13.103 0-25.875 1.44-38.18 4.148l22.008-40.25-31.586-17.27zm104.27 130.379L247 253.275V368h18V258.725l62.488-93.733-14.976-9.984z"/></svg>',
            calculator: {
                cpLeft: 0,
                cpDaily: 0,
                helmet: 'none',
                parties: [{
                    amount: 0,
                    type: 'Small',
                    cp: 500,
                    townHall: 1
                }]
            }
        },
        {
            name: 'VillagePlanner',
            type: 'village',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-8 h-8"><path fill="#fff" d="M109.902 35.87l-71.14 59.284h142.28l-71.14-59.285zm288 32l-71.14 59.284h142.28l-71.14-59.285zM228.73 84.403l-108.9 90.75h217.8l-108.9-90.75zm-173.828 28.75v62h36.81l73.19-60.992v-1.008h-110zm23 14h16v18h-16v-18zm265 18v10.963l23 19.166v-16.13h16v18h-13.756l.104.087 19.098 15.914h-44.446v14h78v-39h18v39h14v-62h-110zm-194.345 48v20.08l24.095-20.08h-24.095zm28.158 0l105.1 87.582 27.087-22.574v-65.008H176.715zm74.683 14h35.735v34h-35.735v-34zm-76.714 7.74L30.37 335.153H319l-144.314-120.26zm198.046 13.51l-76.857 64.047 32.043 26.704H481.63l-108.9-90.75zm-23.214 108.75l.103.086 19.095 15.914h-72.248v77.467h60.435v-63.466h50v63.467h46v-93.466H349.516zm-278.614 16V476.13h126v-76.976h50v76.977h31.565V353.155H70.902zm30 30h50v50h-50v-50z"/></svg>',
            calculator: {
                selections: [
                    { amount: 1, name: "Main Building", toLevel: 20, editable: false },
                    { amount: 1, name: "Rally Point", toLevel: 10, editable: false },
                    { amount: 1, name: "Warehouse", toLevel: 20, editable: true },
                    { amount: 1, name: "Granary", toLevel: 20, editable: true }
                ],
                preset: "No preset"
            }
        },
        {
            name: 'CPCostCalculator',
            type: 'village',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-8 h-8"><g class="" style="" transform="translate(0,0)"><path d="M195.25 349.5h-16.667v133h16.667zm91.634 133h-74.968V376.263zm95.366 0h-74.98l74.98-106.656zm16.666-133v133h-2.665 19.332v-133zm-290.833 133v-100h36v100h17.636V350h-17.036l17.036-53.117V246.5H90.447v236zm180.667-26.26L213.429 349.5h75.321zm16.666-.08V349.5h74.98zm67.167-284.66h-151l-50 153h251zm-246.5 91.5c9.934 0 18 8.066 18 18s-8.066 18-18 18-18-8.066-18-18 8.066-18 18-18zm142.25 35h-36v-42l18-20 18 20zm93.5 0h-36v-42l18-20 18 20zm60.25-163h-37v19l37 111zm-239.424 96.595.924-66.095-11-27.5h124.5v19h-90.5zM81.583 214.833h89v-16.666h-89zM136.7 91.5h-21.234l-33.883 88h89zm240.05 22.833h53.666V97.667H376.75zM134.416 71.5v-42H117.75v42z" fill="#fff" fill-opacity="1"></path></g></svg>',
            calculator: {
                buildings: [
                    { name: "Academy", level: 0},
                    { name: "Barracks", level: 0},
                    { name: "Cranny", level: 0},
                    { name: "Embassy", level: 0},
                    { name: "Hospital", level: 0},
                    { name: "Main Building", level: 1},
                    { name: "Marketplace", level: 0},
                    { name: "Palace", level: 0},
                    { name: "Rally Point", level: 0},
                    { name: "Residence", level: 0},
                    { name: "Smithy", level: 0},
                    { name: "Stable", level: 0},
                    { name: "Trade Office", level: 0},
                    { name: "Workshop", level: 0}
                ]
            }
        },
        {
            name: 'UltimateROI',
            type: 'economy',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">' +
                '<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z" />' +
                '</svg>',
            calculator: {
                villagetype: {
                    "lumber": 1,
                    "clay": 1,
                    "iron": 1,
                    "crop": 15
                },
                oases: [
                    {
                        type1: '',
                        type2: ''
                    },{
                        type1: '',
                        type2: ''
                    },{
                        type1: '',
                        type2: ''
                    }
                ],
                egyptian: false,
                goldBonus: true,
                simTo: 10,
                build: [],
                tab: 0
            }
        },
        {
            name: 'FeederAutomation',
            type: 'economy',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">\n' +
                '  <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3" />\n' +
                '</svg>\n',
            calculator: {
                production: {
                    lumber: 0,
                    clay: 0,
                    iron: 0,
                    crop: 0
                },
                party: "none",
                townHall: 1,
                hours: 1
            }
        },
        {
            name: 'MerchantTrips',
            type: 'economy',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">\n' +
                '  <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 21L3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5" />\n' +
                '</svg>\n',
            calculator: {
                merchants: 20,
                capacity: 500,
                rows: [
                    {
                        amount: 1,
                        lumber: 0,
                        clay: 0,
                        iron: 0,
                        crop: 0
                    }
                ]
            }
        },
        {
            name: 'TotalResources',
            type: 'economy',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">\n' +
                '  <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" />\n' +
                '</svg>\n',
            calculator: {
                rows: [
                    {
                        amount: 1,
                        lumber: 0,
                        clay: 0,
                        iron: 0,
                        crop: 0
                    }
                ]
            }
        },
        {
            name: 'ROICalculator',
            type: 'economy',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-8 h-8"><path fill="#fff" d="M258 21.89c-.5 0-1.2 0-1.8.12-4.6.85-10.1 5.1-13.7 14.81-3.8 9.7-4.6 23.53-1.3 38.34 3.4 14.63 10.4 27.24 18.2 34.94 7.6 7.7 14.5 9.8 19.1 9 4.8-.7 10.1-5.1 13.7-14.7 3.8-9.64 4.8-23.66 1.4-38.35-3.5-14.8-10.4-27.29-18.2-34.94-6.6-6.8-12.7-9.22-17.4-9.22zM373.4 151.4c-11 .3-24.9 3.2-38.4 8.9-15.6 6.8-27.6 15.9-34.2 24.5-6.6 8.3-7.2 14.6-5.1 18.3 2.2 3.7 8.3 7.2 20 7.7 11.7.7 27.5-2.2 43-8.8 15.5-6.7 27.7-15.9 34.3-24.3 6.6-8.3 7.1-14.8 5-18.5-2.1-3.8-8.3-7.1-20-7.5-1.6-.3-3-.3-4.6-.3zm-136.3 92.9c-6.6.1-12.6.9-18 2.3-11.8 3-18.6 8.4-20.8 14.9-2.5 6.5 0 14.3 7.8 22.7 8.2 8.2 21.7 16.1 38.5 20.5 16.7 4.4 32.8 4.3 44.8 1.1 12.1-3.1 18.9-8.6 21.1-15 2.3-6.5 0-14.2-8.1-22.7-7.9-8.2-21.4-16.1-38.2-20.4-9.5-2.5-18.8-3.5-27.1-3.4zm160.7 58.1L336 331.7c4.2.2 14.7.5 14.7.5l6.6 8.7 54.7-28.5-14.2-10zm-54.5.1l-57.4 27.2c5.5.3 18.5.5 23.7.8l49.8-23.6-16.1-4.4zm92.6 10.8l-70.5 37.4 14.5 18.7 74.5-44.6-18.5-11.5zm-278.8 9.1a40.33 40.33 0 0 0-9 1c-71.5 16.5-113.7 17.9-126.2 17.9H18v107.5s11.6-1.7 30.9-1.8c37.3 0 103 6.4 167 43.8 3.4 2.1 10.7 2.9 19.8 2.9 24.3 0 61.2-5.8 69.7-9C391 452.6 494 364.5 494 364.5l-32.5-28.4s-79.8 50.9-89.9 55.8c-91.1 44.7-164.9 16.8-164.9 16.8s119.9 3 158.4-27.3l-22.6-34s-82.8-2.3-112.3-6.2c-15.4-2-48.7-18.8-73.1-18.8z"/></svg>',
            calculator: {
                roiType: 'Field',
                fieldType: 'crop',
                bonusBuilding: 0,
                egyptian: 0,
                fieldToLevel: 1,
                oases: [
                    {
                        type1: '',
                        type2: ''
                    },{
                        type1: '',
                        type2: ''
                    },{
                        type1: '',
                        type2: ''
                    }
                ],
                goldBonus: true,
                buildingType: 'crop',
                buildingToLevel: 1,
                simulateFieldTo10: true,
                fields: {
                    crop: [{level: 10, amount: 6}],
                    lumber: [{level: 10, amount: 4}],
                    clay: [{level: 10, amount: 4}],
                    iron: [{level: 10, amount: 4}]
                },
                hmToLevel: 10,
                hmOasis: {
                    type1: 'crop',
                    type2: ''
                }
            }
        },
        {
            name: 'TroopsTraining',
            type: 'troops',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-8 h-8"><path fill="#fff" d="M179.625 22.313L163.22 58.937c-3.258-.384-6.498-.604-9.72-.624-10.577-.066-20.857 1.808-30.47 5.28L99.78 31.032 55.75 63.188l24.063 33.657c-7.21 10.412-12.3 22.5-14.5 35.75l-42.72 4.687 5.345 54.25 45.468-5c5.082 10.2 12.078 19.372 20.594 26.97l-19.406 43.375 49.375 22.094 19.5-43.564c11.656 1.242 23.08.128 33.75-3l28.124 38.53 31.72-23.186 11.655 20.156C234.014 279.138 220.873 292.3 209.624 307l-49.22-28.344-25.718 46.72 48.125 27.937c-7.068 16.934-11.967 34.975-14.343 53.812H112.5v53.72h56.22c1.66 12.053 4.372 23.753 8.03 35.06h169.312c-23.915-10.758-40.562-34.788-40.562-62.717 0-37.964 30.754-68.75 68.72-68.75 37.963 0 68.75 30.786 68.75 68.75 0 27.93-16.67 51.96-40.595 62.718h91.5V200.375l-11.688-6.406L454.594 242c-16.842-7.204-34.808-12.234-53.594-14.72v-55.53h-53.72v55.47c-18.303 2.377-35.83 7.183-52.31 14.03l-27.126-47.28-36 20.25-9.25-12.97c7.08-9.223 12.43-19.93 15.5-31.72l44.437-4.843-5.342-54.25-42.25 4.157c-4.92-12.618-12.648-23.953-22.563-33.094L229 44.406l-49.375-22.093zm-27.344 84.25c23.3-.24 42.94 17.827 44.376 41.343 1.48 24.275-17.004 45.144-41.28 46.625-24.278 1.483-45.145-16.974-46.626-41.25-1.48-24.274 16.973-45.142 41.25-46.624.76-.046 1.53-.086 2.28-.094z"/></svg>',
            calculator: {
                tribe: 'gaul',
                barracks: {
                    unit: 'Phalanx',
                    level: 20,
                    helmet: 0,
                    amount: 1,
                    great_level: 0
                },
                stables: {
                    unit: 'Druidrider',
                    level: 20,
                    helmet: 0,
                    amount: 1,
                    great_level: 0,
                    hdt_level: 0
                },
                workshop: {
                    unit: 'Ram',
                    level: 20,
                    amount: 0
                },
                recruitment: 0,
                artifact: 0,
                training_amount: 1,
                time_type: 'hour'
            }
        },
        {
            name: 'TroopCost',
            type: 'troops',
            icon: '<svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 0h512v512H0z" fill="#000000" fill-opacity="0.02"></path><g class="" style="" transform="translate(0,0)"><path d="M210.6 44.39l-7-4.39c-13.7-8.4-30.8-13.28-45.5-8.7-15.8 4.92-28.4 17.09-35 35.37l-9.4-4.84c-16.2-8.34-24.68-8.47-31.71-5.31-5.61 2.51-11.46 8.55-18.09 17.37l82.4 63.71c12.9 4.2 31.8 4.1 50.7-.8 19-4.9 37.9-14.5 51.7-27.4l31.1-76.9c-27.4-21.65-52.4-9.11-69.2 11.89zm53.1 76.51c-17 17.2-42.3 28.8-62 34-6.9 1.8-13.8 3.1-20.5 3.8-3.7 6.1-6.8 12.3-9.2 18.5 4.8 24.4 13.8 44.4 27.3 60.8l-14.4 12c-8.3-10-15.7-20.8-21.3-32.8-.9 23.2 4.3 47.2 12.8 72.2l-17.7 6c-15.6-45.6-20.9-92.3 1-136.3-7.4-.6-14.4-2-20.9-4.3l-.3-.1c-4.3 4.1-8.4 8.4-12.3 12.9-31.57 36.6-48.96 85.3-39.86 123.2 4.87 20.3 13.6 39.5 26.16 55.9 18.4-.4 35.8 0 51.6 6 7.5-.8 15.2-1.3 23.2-1.3 28.5 0 54.3 5.3 73.8 14.5 7.6 3.6 14.5 7.9 20 12.8 0-5.3.8-11 2.4-15.2-8.9-8.4-14.5-18.6-14.5-30.2 0-16.1 10.7-29.4 26.2-39 0-4.6.9-9 2.5-13.2-10.1-8.7-16.6-19.5-16.6-32.1 0-7.9 2.6-15.1 7-21.6-4.4-6.4-7-13.6-7-21.5 0-3.9.6-7.5 1.7-11-9.7-8.6-15.8-19.2-15.8-31.4 0-12.1 6-22.6 15.6-31.1-5.9-4.6-12.2-8.5-18.9-11.5zm111.4 2.3c-26 0-49.5 5.5-65.6 13.6-16.2 8.1-23.8 18.1-23.8 26.7 0 8.7 7.6 18.7 23.8 26.8 16.1 8.1 39.6 13.6 65.6 13.6 11.3 0 22-1.1 31.9-2.9v-17c13.9-2.1 25.4-5.9 32.8-10.8v17.6c12.5-3.6 24.5-16.9 24.8-27.3 0-8.6-7.6-18.6-23.8-26.7-16.2-8.1-39.6-13.6-65.7-13.6zm96.5 67.7c-3.3 3.5-7.2 6.8-11.6 9.8l.2 29c12.6-7.5 18.5-16.2 18.5-23.8 0-4.8-2.3-10-7.1-15zm-171.8 15.4c.3 8.6 7.9 18.3 23.8 26.3 16.2 8.2 39.6 13.6 65.7 13.6 16.3 0 31.6-2.2 44.7-5.8l.7-27.2c-17.2 6-37.6 9.3-59.6 9.3-28.5 0-54.4-5.7-74-15.5-.5-.2-.9-.5-1.3-.7zm2 34.8c-1.4 2.7-2 5.4-2 7.9 0 8.7 7.6 18.7 23.8 26.8 16.2 8.1 39.6 13.5 65.7 13.5 13.2 0 25.7-1.3 37-3.8v-24c-11.6 2.2-24 3.3-37 3.3-28.6 0-54.5-5.6-74.1-15.5-4.9-2.4-9.4-5.2-13.4-8.2zm174.9 0c-6.1 4.3-11.4 7.5-17.6 10.2v22.3c13.3-7.7 19.6-16.7 19.6-24.6 0-2.5-.6-5.2-2-7.9zm7.5 36.8c-2 2-4.2 3.9-6.6 5.8v32.4c10.3-7 15.3-14.7 15.3-21.7 0-5.3-2.9-11-8.7-16.5zm-170.1 14c-.1.9-.2 1.7-.2 2.5 0 8.7 7.6 18.6 23.8 26.7 16.2 8.2 39.7 13.6 65.7 13.6 14.9 0 29.1-1.8 41.4-4.8V300c-16.3 5.2-35.2 8-55.5 8-28.6 0-54.5-5.7-74.1-15.5-.4-.2-.7-.4-1.1-.6zm-13.6 21.4c-8.7 6.5-12.8 13.6-12.8 20 0 8.7 7.6 18.6 23.8 26.8 16.2 8.1 39.6 13.5 65.7 13.5 9.5 0 18.7-.7 27.3-2v-18.2h-1.1c-28.6 0-54.5-5.7-74.1-15.6-12.5-6.2-22.9-14.5-28.8-24.5zM463 343.9c-7.9 2.8-16.5 5.1-25.7 6.6v12.1c1.9-.8 3.8-1.6 5.6-2.5 9.8-5 16.4-10.6 20.1-16.2zm9.2 18.2c-3.8 3.8-8.2 7.2-13.1 10.3V401c13.3-7.6 19.6-16.6 19.6-24.5 0-4.6-2.1-9.6-6.5-14.4zm-348.7 2.8c-10.2.1-21.2 1.4-32.6 4.1-22.81 5.3-42.42 15-55.22 25.7-12.8 10.6-17.8 21.4-16.3 29.1 1.5 7.7 9.4 14.8 24.8 18.9 15.35 4 36.82 4.2 59.62-1.1 9.2-2.2 17.8-5 25.7-8.3v-20.7c14.6-6.5 25.5-14.3 30.4-21.9v24.4c12.1-10.4 16.8-20.8 15.4-28.4-1.4-7.7-9.4-14.8-24.8-18.8-7.7-2-16.9-3.1-27-3zm64.6 5.2c2.7 3.9 4.6 8.3 5.6 13.2 1.1 6 .6 11.8-1.2 17.5 9.9 2.6 18.9 6.1 26.7 10.5 4.4 2.4 8.5 5.3 12.1 8.3 9-2.1 16.6-5.1 22-8.7v20.6c16.1-7.6 23.5-16.9 23.5-24.3 0-7.5-7.4-16.8-23.6-24.4-16.1-7.5-39.3-12.6-65.1-12.7zm111.8 5c-.1.4-.1.9-.1 1.4 0 8.7 7.6 18.6 23.8 26.8 16.2 8.1 39.6 13.5 65.7 13.5 13.2 0 25.7-1.4 37-3.8v-26.9c-14.8 4-31.5 6.2-49.1 6.2-28.6 0-54.5-5.7-74.1-15.5-1.1-.6-2.2-1.2-3.2-1.7zm2.8 37.3c-2 3.3-2.9 6.5-2.9 9.6 0 8.7 7.6 18.6 23.8 26.8 16.2 8.1 39.6 13.5 65.7 13.5 13.2 0 25.7-1.4 37-3.8v-26.4c-11.6 2.2-24 3.4-37 3.4-28.6 0-54.5-5.7-74.1-15.6-4.5-2.2-8.7-4.7-12.5-7.5zm173.1 0c-5.8 3.9-10.9 7-16.7 9.5v24.6c13.3-7.6 19.6-16.6 19.6-24.5 0-3.1-.9-6.3-2.9-9.6zm-292.6 5.4c-3.5 4.4-7.6 8.6-12.2 12.4-15.6 13.1-37.6 23.7-63 29.6-9.06 2.1-18.06 3.4-26.7 4.1 3.2 5.3 8.83 10.5 17.07 15.1 13.63 7.7 33.63 12.9 55.83 12.9 10.1 0 19.7-1.1 28.5-3v-20.8c13.8-2.1 25.4-5.9 32.8-10.8v18.4c10-7 14.8-14.9 14.8-22.4 0-8.7-6.5-18-20.2-25.7-7.4-4.1-16.6-7.5-26.9-9.8z" fill="#fff" fill-opacity="1"></path></g></svg>',
            calculator: {
                tribe: 'gaul',
                units: [
                    {
                        id: 0,
                        amount: 100
                    }
                ],
                recruitment: 0,
                artifact: 0,
                helm_inf: 0,
                helm_cav: 0,
                hospital_level: 20,
                hdt: 20
            }
        },
        {
            name: 'SmithyEfficiency',
            type: 'troops',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-8 h-8"><path fill="#fff" d="M128.688 115.594v147.75h285v-147.75h-285zm-111.844 20.47c17.374 47.14 54.372 80.413 94.906 93.81v-93.81H16.844zm414.375 12.31v88.657c21.457-9.083 42.92-25.257 64.374-47.374-21.52-22.562-42.633-35.173-64.375-41.28zm-226.25 132.47c-12.15 38.536-33.897 71.5-60.595 100.47l257.844-.002c-28.705-29.016-49.952-62.054-61.5-100.468H204.97zM101.843 400v43.78h337.562V400H101.844z"/></svg>',
            calculator: {
                tribe: 'gaul',
                units: [false,false,false,false,false,false,false,false],
                smithy: true,
                level: 20
            }
        },
        {
            name: 'CropScouter',
            type: 'troops',
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-8 h-8"><path fill="#fff" d="M256 105c-60.25 0-124.749 38.39-167.945 77.66-34.931 31.756-58.722 62.36-66.88 73.34 8.158 10.98 31.949 41.584 66.88 73.34C131.25 368.61 195.75 407 256 407s124.749-38.39 167.945-77.66c34.931-31.756 58.722-62.36 66.88-73.34-8.158-10.98-31.949-41.584-66.88-73.34C380.75 143.39 316.25 105 256 105zm0 23a128 128 0 0 1 63.486 16.969A48 48 0 0 0 288 190a48 48 0 0 0 .023.453A72.362 72.362 0 0 0 265 183.576V160h-18v23.576c-33.034 4.095-59.33 30.39-63.424 63.424H160v18h23.576c4.095 33.034 30.39 59.33 63.424 63.424V352h18v-23.576c33.034-4.095 59.33-30.39 63.424-63.424H352v-18h-23.576a72.33 72.33 0 0 0-1.98-10.014A48 48 0 0 0 336 238a48 48 0 0 0 41.023-23.195A128 128 0 0 1 384 256a128 128 0 0 1-128 128 128 128 0 0 1-128-128 128 128 0 0 1 128-128zm-9 73.738V224h18v-22.262c23.237 3.792 41.47 22.025 45.262 45.262H288v18h22.262c-3.792 23.237-22.025 41.47-45.262 45.262V288h-18v22.262c-23.237-3.792-41.47-22.025-45.262-45.262H224v-18h-22.262c3.792-23.237 22.025-41.47 45.262-45.262z"/></svg>',
            calculator: {
                fieldLevel: 10,
                egyptian: 0,
                oases: [
                    {
                        type1: '',
                        type2: ''
                    },{
                        type1: '',
                        type2: ''
                    },{
                        type1: '',
                        type2: ''
                    }
                ],
                goldBonus: true,
                cropFields: 6,
                population: 500,
                scout1: 0,
                scout2: 0,
                deltaTime: 1,
                scoutOasis: false
            }
        },
        // {
        //     name: 'TroopsCompare',
        //     type: 'troops',
        //     icon: 'Tco',
        //     calculator: {
        //         tribe: 'gaul',
        //         upgrade_level: 20,
        //         recruitment: 10,
        //         boots: 0,
        //         hospital_level: 20,
        //         hdt: 20,
        //         brewery: 10,
        //         items: 3
        //     }
        // },
    ]

    const deletePopUp = ref(false)
</script>

<template>
    <div class="flex flex-row flex-wrap items-start gap-2" style="width: 88px;">

        <template v-for="(item, index) in ['village', 'economy', 'troops']">
            <div class="text-xs sm:text-sm uppercase border-b border-slate-800 pb-1 w-full">{{ $t(`menu.cat_${item}`) }}</div>

            <button class="p-0.5 sm:p-1 rounded cursor-pointer group relative"
                 :class="[
                     index === 0 ? 'bg-emerald-600 hover:bg-emerald-400 text-white' : '',
                     index === 1 ? 'bg-amber-600 hover:bg-amber-400 text-white' : '',
                     index === 2 ? 'bg-slate-600 hover:bg-slate-400 text-white' : ''
                 ]"
                 v-for="item in menu.filter((e) => {return e.type === item})"
                 @click="$emit('add:calculator', {name: item.name, calculator: item.calculator})">

                <span v-html="item.icon" class="" />
                <span class="absolute z-50 hidden sm:group-hover:flex top-1 -right-3 translate-x-full px-2 py-1 bg-slate-800 rounded-lg text-center text-white text-sm w-36">{{ $t(`menu.${item.name}`) }}</span>

            </button>

        </template>

        <div class="w-full border-b border-slate-800"></div>

        <button class="bg-rose-600 text-white p-2 rounded cursor-pointer hover:bg-rose-400 group relative" @click="deletePopUp = true" role="button">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
            </svg>
            <span class="absolute z-50 hidden sm:group-hover:flex top-1 -right-3 translate-x-full px-2 py-1 bg-slate-800 rounded-lg text-center text-white text-sm w-36">{{ $t('tabmenu.delete') }}</span>
        </button>

        <button class="bg-sky-600 text-white p-2 rounded cursor-pointer hover:bg-sky-400 group relative"
             @click="$emit('add:calculator', { name: 'Help' } )">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
            </svg>
            <span class="absolute z-50 hidden sm:group-hover:flex top-1 -right-3 translate-x-full px-2 py-1 bg-slate-800 rounded-lg text-center text-white text-sm w-36">{{ $t('menu.help') }}</span>
        </button>
    </div>

    <div v-show="deletePopUp" class="absolute -left-2 -right-2 bottom-2 bg-white border rounded shadow-md">
        <div class="flex flex-col gap-3 px-2 py-4 text-sm">
            <p class="text-sm">{{$t('tabmenu.tab_items_delete')}}</p>
            <button class="px-3 pt-0.5 pb-1 w-full font-semibold hover:opacity-90 bg-red-600 rounded" @click="deletePopUp = false; $emit('clear:tab')">{{$t('yes')}}</button>
            <button class="px-3 pt-0.5 pb-1 w-full font-semibold hover:opacity-90 bg-emerald-600 rounded" @click="deletePopUp = false">{{$t('no')}}</button>
        </div>
    </div>
</template>
